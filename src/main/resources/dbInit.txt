CREATE TABLE IF NOT EXISTS USER(USER_ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,NAME TEXT NOT NULL, TYPE_ID INTEGER NOT NULL, EMAIL TEXT NOT NULL, PASSWORD TEXT NOT NULL, FOREIGN KEY('TYPE_ID') REFERENCES USER_TYPES ('TYPE_ID'));
CREATE TABLE IF NOT EXISTS USER_TYPES(TYPE_ID INTEGER NOT NULL UNIQUE PRIMARY KEY, TYPE TEXT UNIQUE NOT NULL);
CREATE TABLE IF NOT EXISTS ASSIGMENT(ASSIGMENT_ID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, ASSIGMENT_NAME TEXT NOT NULL);
CREATE TABLE IF NOT EXISTS STUDENT_ASSIGMENT(STUDENT_ID INTEGER NOT NULL UNIQUE , ASSIGMENT_ID INTEGER NOT NULL UNIQUE, SUBMIT TEXT, GRADE INTEGER);

INSERT INTO USER(NAME,TYPE_ID,EMAIL,PASSWORD) SELECT 'ziomek', 1, 'ziomek@codecool.com', '123' WHERE NOT EXISTS(SELECT 1 FROM USER WHERE NAME = 'ziomek' AND TYPE_ID = 1 AND EMAIL = 'ziomek@codecool.com' AND PASSWORD = '123');
INSERT INTO USER_TYPES(TYPE_ID,TYPE) SELECT 1, 'Manager' WHERE NOT EXISTS(SELECT 1 FROM USER_TYPES WHERE TYPE_ID = 1 AND TYPE = 'Manager');
INSERT INTO USER_TYPES(TYPE_ID,TYPE) SELECT 2, 'Mentor' WHERE NOT EXISTS(SELECT 1 FROM USER_TYPES WHERE TYPE_ID = 2 AND TYPE = 'Mentor');
INSERT INTO USER_TYPES(TYPE_ID,TYPE) SELECT 3, 'Student' WHERE NOT EXISTS(SELECT 1 FROM USER_TYPES WHERE TYPE_ID = 3 AND TYPE = 'Student');
